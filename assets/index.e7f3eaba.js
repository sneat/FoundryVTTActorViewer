import{d as e,c as t,a as l,b as a,t as r,o,w as s,v as n,F as i,r as c,e as d,f as u,g as m,h as f}from"./vendor.8a9eadb2.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(l){const a=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((l,o)=>{const s=new URL(e,a);if(self[t].moduleMap[s])return l(self[t].moduleMap[s]);const n=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(n),onerror(){o(new Error(`Failed to import: ${e}`)),r(i)},onload(){l(self[t].moduleMap[s]),r(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("assets/");var h=e({name:"Actor",props:{actor:{type:Object,required:!0},config:{type:Object,required:!0}},methods:{hasAvatarURL:e=>!!(null==e?void 0:e.img),getAvatarURL(e){let t=e.img;try{new URL(e.img)}catch(l){t=`${this.config.siteURL}${e.img}`}return t},getActorSheetURL(e){return`https://ardittristan.github.io/VTTExternalActorSite/?${this.config.siteURL}actorAPI/${this.config.worldName}.json${e._id}`},getName:e=>(null==e?void 0:e.name)||"Unknown",getRace(e){var t,l;return(null==(l=null==(t=null==e?void 0:e.data)?void 0:t.details)?void 0:l.race)||"Unknown"},getLevel(e){var t,l;return(null==(l=null==(t=null==e?void 0:e.data)?void 0:t.details)?void 0:l.level)||"Unknown"},getClass(e){let t=[];return e.items.filter((e=>"class"===e.type)).forEach((l=>{var a,r,o,s;(null==(a=null==l?void 0:l.data)?void 0:a.levels)===(null==(o=null==(r=null==e?void 0:e.data)?void 0:r.details)?void 0:o.level)?t.push(l.name):t.push(`${l.name} (${null==(s=null==l?void 0:l.data)?void 0:s.levels})`)})),t.length?t.join(" / "):"Unknown"}}});const v={class:"avatar"};h.render=function(e,s,n,i,c,d){return o(),t("tr",null,[l("td",v,[e.hasAvatarURL(e.actor)?(o(),t("img",{key:0,src:e.getAvatarURL(e.actor),class:"avatar"},null,8,["src"])):a("",!0)]),l("td",null,[l("a",{href:e.getActorSheetURL(e.actor),target:"_blank"},r(e.getName(e.actor)),9,["href"])]),l("td",null,r(e.getRace(e.actor)),1),l("td",null,r(e.getClass(e.actor)),1),l("td",null,r(e.getLevel(e.actor)),1)])};var p=e({name:"App",components:{Actor:h},data:()=>({actors:[],config:null,filterClass:null,filterLevel:null,filterName:null,filterRace:null,error:null,loading:!0}),created(){(async function(){return fetch("config.json").then((e=>e.json())).then((e=>{if(0===Object.keys(e).length)throw new Error('"config.json" is empty. Check "config.json.example" for an example.');"/"!==e.siteURL.slice(-1)&&(console.warn("config.json",`Expected "siteURL" to end in a slash ("/"). Got ${e.siteURL}`),e.siteURL+="/");let t=((...e)=>e.join(" ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-"))(e.worldName);return t!==e.worldName&&console.warn("config.json",`Expected "worldName" to be the slug format like "${t}" but got "${e.worldName}".`),e}))})().then((e=>{const t=`${e.siteURL}actorAPI/${e.worldName}-actors.json`;fetch(t).then((e=>e.json())).then((t=>{this.actors=Object.values(t),this.config=e,this.loading=!1})).catch((e=>{this.error=`Error: ${e}. Could not access ${t}.`}))}))},computed:{filteredActors(){return this.actors.filter(this.filterByLevel).filter(this.filterByClass).filter(this.filterByName).filter(this.filterByRace).sort(this.orderByLevel)}},methods:{filterByClass(e){if(!this.filterClass)return!0;let t="";return h.methods&&(t=h.methods.getClass(e)),t.toLowerCase().includes(this.filterClass.toLowerCase())},filterByLevel(e){var t,l;return!this.filterLevel||(null==(l=null==(t=null==e?void 0:e.data)?void 0:t.details)?void 0:l.level)==this.filterLevel},filterByName(e){if(!this.filterName)return!0;let t="";return h.methods&&(t=h.methods.getName(e)),t.toLowerCase().includes(this.filterName.toLowerCase())},filterByRace(e){if(!this.filterRace)return!0;let t="";return h.methods&&(t=h.methods.getRace(e)),t.toLowerCase().includes(this.filterRace.toLowerCase())},orderByLevel:(e,t)=>e.data.details.level-t.data.details.level}});const g={class:"container"},w=l("div",{class:"row"},[l("div",{class:"column"},[l("h1",null,"Available Actors"),l("p",null," This is a list of actors available within this intance of FoundryVTT. ")])],-1),L={class:"row"},y={class:"column"},R={key:0,class:"error"},b={key:1,class:"loading"},U=l("div",{class:"lds-dual-ring"},null,-1),C={key:2,class:"u-full-width"},j=l("th",{width:"4em"},[l("label",{for:"filterName"},"Name")],-1),A={width:"25%"},N=d("Race "),k={width:"23%"},$=d("Class "),B={width:"12%"},V=d("Level "),E=u('<div class="row"><div class="column footer"><p> Built to make it easier to view actors in your <a href="https://foundryvtt.com/" target="_blank">FoundryVTT</a> instance. Uses the <a href="https://foundryvtt.com/packages/externalactor/" target="_blank">VTT External Actor Viewer</a> module. View the <a href="https://github.com/sneat/FoundryVTTActorViewer/blob/master/README.md" target="_blank">Readme</a>. </p></div></div>',1);p.render=function(e,a,d,u,f,h){const v=m("Actor");return o(),t("div",g,[w,l("div",L,[l("div",y,[e.error?(o(),t("div",R,[l("span",null,r(e.error),1)])):e.loading?(o(),t("div",b,[U])):(o(),t("table",C,[l("thead",null,[l("tr",null,[j,l("th",null,[s(l("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>e.filterName=t),id:"filterName",type:"search",class:"x-large"},null,512),[[n,e.filterName,void 0,{trim:!0}]])]),l("th",A,[l("label",null,[N,s(l("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>e.filterRace=t),type:"search",class:"medium"},null,512),[[n,e.filterRace,void 0,{trim:!0}]])])]),l("th",k,[l("label",null,[$,s(l("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>e.filterClass=t),type:"search",class:"medium"},null,512),[[n,e.filterClass,void 0,{trim:!0}]])])]),l("th",B,[l("label",null,[V,s(l("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>e.filterLevel=t),type:"number",class:"small"},null,512),[[n,e.filterLevel,void 0,{number:!0}]])])])])]),l("tbody",null,[(o(!0),t(i,null,c(e.filteredActors,(l=>(o(),t(v,{actor:l,key:l.data.id,config:e.config},null,8,["actor","config"])))),128))])]))])]),E])},f(p).mount("#app");
